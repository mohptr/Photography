<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Abhisek Photography</title>
  <!-- Primary Meta -->
  <meta name="description" content="Photography by Abhisek Mohapatra â€” featuring portraits, polaroids, and visual stories." />
  <meta name="author" content="Abhisek Mohapatra" />

  <!-- Apple / Retina / Pinned Tab Support -->
  <link rel="apple-touch-icon" sizes="180x180" href="assets/fav.png" />
  <link rel="mask-icon" href="assets/safari-pinned-tab.svg" color="#000000" />
  <meta name="apple-mobile-web-app-title" content="MOHPTR" />
  <meta name="application-name" content="MOHPTR" />
  <meta name="msapplication-TileColor" content="#ffffff" />
  <meta name="theme-color" content="#ffffff" />

  <!-- Web App Manifest -->
  <link rel="manifest" href="assets/site.webmanifest" />

  <!-- Favicons -->
  <link rel="icon" type="image/png" sizes="32x32" href="assets/fav.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="assets/fav.png" />

  <!-- Preload Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600&family=Futura:wght@400;700&display=swap" rel="stylesheet" />

  <style>
    /* ======= BODY & GENERAL ======= */
    body { margin:0; font-family:'Futura',sans-serif; background:#000; color:#fff; overflow-x:hidden; }

    /* ======= HERO ======= */
    .hero { height:100vh; width:100%; position:relative; overflow:hidden; }
    .hero img { position:absolute; top:0; left:0; width:100%; height:100%; object-fit:contain; opacity:0; transition:opacity 2s ease-in-out; }
    .hero img.active { opacity:1; z-index:1; }
/* ======= HERO BACKGROUND (Black for Desktop Only) ======= */
@media (min-width: 769px) {
  .hero {
    background-color: #000; /* Black background for desktop screens */
  }
}
.hero {
  transition: background-color 1s ease-in-out;
}
    /* ======= NAVBAR ======= */
    .navbar { display:flex; flex-direction:column; background:#fff; color:#000; padding:40px 80px; }
    .navbar-top { display:flex; justify-content:flex-start; align-items:center; gap:50px; }
    .navbar-top .brand { font-family:'Futura',sans-serif; font-weight:bold; font-size:2rem; text-transform:uppercase; }
    .navbar-top .links { display:flex; gap:25px; font-family:'Futura',sans-serif; font-weight:200; font-size:1rem; text-transform:capitalize; }
    .navbar-top .links a { text-decoration:none; color:#000; transition:0.3s; }
    .navbar-top .links a:hover { color:#20c997; }

    /* ======= TABS ======= */
    .tabs { display:flex; justify-content:center; margin-top:20px; }
    .tab { padding:10px 30px; margin:0 5px; cursor:pointer; color:#aaa; font-weight:bold; transition:0.3s ease; border-bottom:3px solid transparent; }
    @keyframes pulseTextGlow { 0%{text-shadow:0 0 5px #fff,0 0 10px #fff;} 50%{text-shadow:0 0 15px #fff,0 0 30px #fff;} 100%{text-shadow:0 0 5px #fff,0 0 10px #fff;} }
    .tab.active { color:#000; animation:pulseTextGlow 4s infinite; }
    .tab.active[data-target="portraits"]{ border-bottom:3px solid #20c997; }
    .tab.active[data-target="polaroids"]{ border-bottom:3px solid #ff7f50; }

/* ======= FROSTED GLASS PANEL (Modern Apple UI) ======= */
.frosted-glass {
  position: relative;
  z-index: 1;
  margin: 60px auto;
  padding: 40px 60px;
  max-width: 92%;
  border-radius: 30px;

  /* Core frosted effect */
  background: rgba(255, 255, 255, 0.35);
  backdrop-filter: blur(20px) saturate(180%);
  -webkit-backdrop-filter: blur(20px) saturate(180%);
  border: 1.5px solid rgba(255, 255, 255, 0.5);

  /* Soft shadow for lift */
  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.08);
}

/* Add a subtle inner white border (for depth) */
.frosted-glass::before {
  content: "";
  position: absolute;
  top: 12px;
  left: 12px;
  right: 12px;
  bottom: 12px;
  border-radius: 25px;
  border: 1px solid rgba(255, 255, 255, 0.4);
  pointer-events: none;
}

/* Background for the gallery section */
body {
  background-color: #fff;
  color: #000;
}

/* Ensure galleries sit inside with spacing */
.frosted-glass .gallery {
  background: transparent !important;
  padding: 40px 0;
}

    /* ======= GALLERY ======= */
    .gallery { display: flex; flex-wrap: wrap; justify-content: center; gap: 20px; padding: 40px 80px 60px 80px; background: transparent; display: none; }
    .gallery.active { display: flex; }
    .thumb { flex: 0 0 auto; overflow: hidden; box-shadow: 0 2px 10px rgba(0,0,0,0.08); transition: transform 0.3s ease, box-shadow 0.3s ease; }
    .thumb img { height: 425px; width: auto; display: block; object-fit: cover; border-radius: 0; }
    .thumb:hover { transform: scale(1.05); box-shadow: 0 4px 15px rgba(0,0,0,0.15); cursor: pointer; }

    /* ======= POPUP ======= */
    #popup { position:fixed; top:0; left:0; width:100%; height:100%; display:none; z-index:1001; justify-content:center; align-items:center; background:rgba(0,0,0,0.3); backdrop-filter:blur(10px); }
    #popup img { max-width:90vw; max-height:90vh; width:auto; height:auto; box-shadow:0 10px 30px rgba(0,0,0,0.7); border-radius:5px; }
    #popup .exif { position:absolute; bottom:10px; left:10px; color:#fff; background:rgba(0,0,0,0.5); padding:5px 10px; font-size:0.9rem; border-radius:4px; }

    /* ======= FOOTER ======= */
    footer { background-color:#fff; padding:120px 80px; display:flex; justify-content:space-between; align-items:center; font-weight:300; font-size:1rem; color:#000; }
    footer .left, footer .right a { color:#000; text-decoration:none; }
    footer .left { font-family:'Futura',sans-serif; font-weight:bold; }
    footer .right a { margin-left:25px; font-family:'Futura',sans-serif; font-weight:400; font-size:1rem; transition:0.3s; }
    footer .right a:hover { color:#20c997; }

    /* ======= RESPONSIVE ADJUSTMENTS ======= */
    @media (max-width: 1024px) {
      .gallery { gap: 15px; padding: 30px 40px; }
      .thumb img { height: 340px; }
    }

    @media (max-width: 768px) {
      body { display: flex; flex-direction: column; }
      .navbar { order: -1; padding: 20px 15px; }

      .hero { height: 40vh; background-color: #fff; }
      .hero img { object-fit: contain; }

      .navbar-top { flex-wrap: wrap; justify-content: space-between; gap: 15px; }
      .navbar-top .brand { font-size: 1.5rem; }
      .navbar-top .links { gap: 10px; font-size: 0.9rem; }

      .tabs { flex-wrap: nowrap; overflow-x: auto; padding: 0 10px; }
      .tab { padding: 8px 20px; font-size: 0.9rem; }

      .gallery { gap: 10px; padding: 20px 15px 40px 15px; }
      .thumb img { height: 140px; }

      footer { flex-direction: column; padding: 60px 15px; text-align: center; gap: 15px; }
      footer .right { margin-top: 10px; }
      footer .right a { margin-left: 10px; font-size: 0.9rem; }
    }

    @media (max-width: 600px) {
      .thumb img { height: 120px; }
    }
  </style>
</head>

<body>
  <!-- HERO -->
  <div class="hero" id="hero"></div>

  <!-- NAVIGATION BAR -->
  <div class="navbar">
    <div class="navbar-top">
      <div class="brand">MOHPTR</div>
      <div class="links">
        <a href="https://www.TheAbhisek.com" target="_blank">About</a>
        <a href="https://www.TheAbhisek.com/journal" target="_blank">Journal</a>
        <a href="https://www.TheAbhisek.com/contact" target="_blank">Contact</a>
      </div>
    </div>

    <!-- Tabs -->
    <div class="tabs">
      <div class="tab active" data-target="portraits">Portraits</div>
      <div class="tab" data-target="polaroids">Polaroids</div>
    </div>
  </div>

<!-- GALLERY SECTION -->
<div class="frosted-glass" id="glass-wrapper">
  <div id="portraits" class="gallery active"></div>
  <div id="polaroids" class="gallery"></div>
</div>

  <!-- POPUP -->
  <div id="popup">
    <img id="popup-img" src="" alt="Full Image"/>
    <div class="exif" id="popup-exif"></div>
  </div>

  <!-- FOOTER -->
  <footer>
    <div class="left">PHOTOGRAPHY | ABHISEK MOHAPATRA</div>
    <div class="right">
      <a href="https://www.TheAbhisek.com" target="_blank">About</a>
      <a href="https://www.TheAbhisek.com/journal" target="_blank">Journal</a>
      <a href="https://www.TheAbhisek.com/contact" target="_blank">Contact</a>
    </div>
  </footer>

  <!-- SCRIPTS -->
  <script src="assets/js/exif.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/color-thief/2.3.2/color-thief.umd.js"></script>
  <script>
    const hero = document.getElementById("hero");
    const HERO_INTERVAL = 10000;

async function initHero(heroImages, baseUrl) {
  const heroElement = document.getElementById("hero");
  const colorThief = new ColorThief();

  // Create and append hero images
  heroImages.forEach((src, i) => {
    const img = document.createElement("img");
    img.src = baseUrl + src;
    if (i === 0) img.classList.add("active");
    heroElement.appendChild(img);
  });

  const slides = heroElement.querySelectorAll("img");
  let index = 0;

  // Function to extract and update hero background color
  function updateHeroBg() {
    const activeImg = heroElement.querySelector("img.active");
    if (!activeImg) return;

    if (activeImg.complete) {
      try {
        const color = colorThief.getColor(activeImg);
        heroElement.style.backgroundColor = `rgb(${color[0]}, ${color[1]}, ${color[2]})`;
      } catch (err) {
        console.warn("Color extraction failed:", err);
      }
    } else {
      activeImg.addEventListener("load", updateHeroBg);
    }
  }

  updateHeroBg(); // Initial background

  // Slideshow with background update
  setInterval(() => {
    slides[index].classList.remove("active");
    index = (index + 1) % slides.length;
    slides[index].classList.add("active");
    updateHeroBg(); // Refresh background
  }, HERO_INTERVAL);
}

    const tabs = document.querySelectorAll(".tab");
    const galleries = document.querySelectorAll(".gallery");

    function initTabs() {
      tabs.forEach(tab => {
        tab.addEventListener("click", () => {
          tabs.forEach(t => t.classList.remove("active"));
          galleries.forEach(g => g.classList.remove("active"));
          tab.classList.add("active");
          document.getElementById(tab.dataset.target).classList.add("active");
        });
      });
    }

    const popup = document.getElementById("popup");
    const popupImg = document.getElementById("popup-img");
    const popupExif = document.getElementById("popup-exif");

    function populateGallery(containerId, images, baseUrl) {
      const container = document.getElementById(containerId);
      container.innerHTML = "";
      images.forEach(src => {
        const article = document.createElement("article");
        article.className = "thumb";
        const img = document.createElement("img");
        img.src = baseUrl + src;
        article.appendChild(img);
        container.appendChild(article);

        img.addEventListener("click", () => {
          popupImg.src = img.src;
          popupExif.innerText = "";

          if(containerId === "portraits") {
            try {
              const isSameOrigin = new URL(img.src).origin === window.location.origin;
              if (isSameOrigin) {
                EXIF.getData(img, function() {
                  const model = EXIF.getTag(this, "Model");
                  const fnumber = EXIF.getTag(this, "FNumber");
                  const exposure = EXIF.getTag(this, "ExposureTime");
                  const iso = EXIF.getTag(this, "ISOSpeedRatings");
                  const exifParts = [];
                  if(model) exifParts.push(`Model: ${model}`);
                  if(fnumber) exifParts.push(`FNumber: ${fnumber}`);
                  if(exposure) exifParts.push(`Exposure: ${exposure}`);
                  if(iso) exifParts.push(`ISO: ${iso}`);
                  popupExif.innerText = exifParts.join(' | ');
                });
              }
            } catch(e) {
              console.warn("Skipping EXIF for cross-origin image:", img.src);
            }
          }

          popup.style.display = "flex";
        });
      });
    }

    popup.addEventListener("click", e => {
      if(e.target === popup) popup.style.display="none";
    });

    async function initSite() {
      try {
        const res = await fetch("manifest.json");
        const data = await res.json();
        const base = data.baseUrl || "";

        await initHero(data.heroImages || [], base);
        initTabs();
        populateGallery("portraits", data.galleryImages || [], base);
        populateGallery("polaroids", data.polaroids || [], base);
      } catch(err) {
        console.error("Error loading manifest:", err);
      }
    }

    initSite();
  </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>MOHPTR Photography</title>
<style>
  /* ===== BODY ===== */
  body {
    margin:0; font-family:Arial,sans-serif; background:#fff; color:#000; overflow-x:hidden;
  }

  /* ===== HERO ===== */
  .hero {
    height:100vh; width:100%; position:relative; overflow:hidden; background:#000;
  }
  .hero img {
    position:absolute; top:0; left:0; width:100%; height:100%; object-fit:contain; opacity:0; transition:opacity 2s ease-in-out;
  }
  .hero img.active { opacity:1; z-index:1; }

  /* ===== NAV BAR ===== */
  .site-nav {
    display:flex; flex-direction:column; padding:40px 60px 20px 60px; background:#fff; font-family:'Futura',sans-serif;
  }
  .site-nav .brand-links {
    display:flex; align-items:center; justify-content:space-between;
  }
  .brand-name {
    font-weight: bold; font-size:2.2rem; letter-spacing:2px; text-transform:uppercase;
  }
  .nav-links {
    display:flex; gap:30px; font-size:1rem; text-transform:capitalize;
  }
  .nav-links a {
    text-decoration:none; color:#000; transition:0.3s; font-family:'Futura',sans-serif;
  }
  .nav-links a:hover { color:#20c997; }

  /* ===== TAB NAVIGATION ===== */
  .tabs {
    display:flex; justify-content:center; margin:0; padding:0 0 20px 0; font-family:Arial,sans-serif;
  }
  .tab { padding:10px 30px; margin:0 5px; cursor:pointer; color:#aaa; font-weight:bold; transition:0.3s ease; border-bottom:3px solid transparent; }
  @keyframes pulseTextGlow { 0%{text-shadow:0 0 5px #000,0 0 10px #000;} 50%{text-shadow:0 0 15px #000,0 0 30px #000;} 100%{text-shadow:0 0 5px #000,0 0 10px #000;} }
  .tab.active { color:#000; animation:pulseTextGlow 4s infinite; }
  .tab.active[data-target="portraits"]{ border-bottom:3px solid #20c997; }
  .tab.active[data-target="polaroids"]{ border-bottom:3px solid #ff7f50; }

  /* ===== GALLERY ===== */
  .gallery { display:grid; grid-template-columns:masonry; gap:10px; background:#fff; display:none; }
  .gallery.active { display:grid; }
  .thumb { width:100%; position:relative; overflow:hidden; }
  .thumb img { width:100%; height:auto; object-fit:cover; transition:transform 0.3s ease; display:block; }
  .thumb img:hover { transform:scale(1.05); cursor:pointer; }

  /* ===== POPUP ===== */
  #popup { position:fixed; top:0; left:0; width:100%; height:100%; display:none; z-index:1001; justify-content:center; align-items:center; background:rgba(0,0,0,0.3); backdrop-filter:blur(10px); }
  #popup img { max-width:90vw; max-height:90vh; width:auto; height:auto; box-shadow:0 10px 30px rgba(0,0,0,0.7); border-radius:5px; }
  #popup .exif { position:absolute; bottom:10px; left:10px; color:#fff; background:rgba(0,0,0,0.5); padding:5px 10px; font-size:0.9rem; border-radius:4px; }

  /* ===== FOOTER ===== */
  footer {
    background-color:#fff; padding:60px 80px; display:flex; justify-content:space-between; align-items:center; font-weight:300; font-size:1rem; border-top:none;
  }
  footer .left { color:#000; } footer .left .name { color:#555; margin-left:5px; }
  footer .right a { text-decoration:none; font-weight:bold; color:#000; font-size:1rem; border:2px solid orange; padding:10px 22px; border-radius:50px; background:#fff; margin-left:15px; transition:0.3s ease; }
  footer .right a:hover { border-color:#fff; background:#20c997; color:#fff; }
</style>
</head>
<body>

<!-- HERO -->
<div class="hero" id="hero"></div>

<!-- NAVIGATION -->
<div class="site-nav">
  <div class="brand-links">
    <div class="brand-name">MOHPTR</div>
    <div class="nav-links">
      <a href="https://www.TheAbhisek.com" target="_blank">About</a>
      <a href="https://www.TheAbhisek.com/journal" target="_blank">Journal</a>
      <a href="https://www.TheAbhisek.com/contact" target="_blank">Contact</a>
    </div>
  </div>
</div>

<!-- TAB NAV -->
<div class="tabs">
  <div class="tab active" data-target="portraits">Portraits</div>
  <div class="tab" data-target="polaroids">Polaroids</div>
</div>

<!-- GALLERIES -->
<div id="portraits" class="gallery active"></div>
<div id="polaroids" class="gallery"></div>

<!-- POPUP -->
<div id="popup">
  <img id="popup-img" src="" alt="Full Image"/>
  <div class="exif" id="popup-exif"></div>
</div>

<!-- FOOTER -->
<footer>
  <div class="left">PHOTOGRAPHY <span class="name">MOHPTR</span></div>
  <div class="right">
    <a href="https://www.TheAbhisek.com" target="_blank">About</a>
    <a href="https://www.TheAbhisek.com/journal" target="_blank">Journal</a>
    <a href="https://www.TheAbhisek.com/contact" target="_blank">Contact</a>
  </div>
</footer>

<!-- CORE JS (UNTOUCHED) -->
<script src="assets/js/exif.js"></script>
<script>
const hero = document.getElementById("hero");
const popup = document.getElementById("popup");
const popupImg = document.getElementById("popup-img");
const popupExif = document.getElementById("popup-exif");
const HERO_INTERVAL = 10000;
const tabs = document.querySelectorAll(".tab");
const galleries = document.querySelectorAll(".gallery");

tabs.forEach(tab => {
  tab.addEventListener("click", () => {
    tabs.forEach(t => t.classList.remove("active"));
    galleries.forEach(g => g.classList.remove("active"));
    tab.classList.add("active");
    document.getElementById(tab.dataset.target).classList.add("active");
  });
});

function populateGallery(containerId, images, baseUrl) {
  const container = document.getElementById(containerId);
  container.innerHTML = "";
  images.forEach(src => {
    const article = document.createElement("article");
    article.className = "thumb";
    const img = document.createElement("img");
    img.src = baseUrl + src;
    article.appendChild(img);
    container.appendChild(article);

    img.addEventListener("click", () => {
      popupImg.src = img.src;
      popupExif.innerText = "";

      if(containerId === "portraits") {
        try {
          const isSameOrigin = new URL(img.src).origin === window.location.origin;
          if (isSameOrigin) {
            EXIF.getData(img, function() {
              const model = EXIF.getTag(this, "Model");
              const fnumber = EXIF.getTag(this, "FNumber");
              const exposure = EXIF.getTag(this, "ExposureTime");
              const iso = EXIF.getTag(this, "ISOSpeedRatings");
              const exifParts = [];
              if(model) exifParts.push(`Model: ${model}`);
              if(fnumber) exifParts.push(`FNumber: ${fnumber}`);
              if(exposure) exifParts.push(`Exposure: ${exposure}`);
              if(iso) exifParts.push(`ISO: ${iso}`);
              popupExif.innerText = exifParts.join(' | ');
            });
          }
        } catch(e) {
          console.warn("Skipping EXIF for cross-origin image:", img.src);
        }
      }
      popup.style.display = "flex";
    });
  });
}

popup.addEventListener("click", e => {
  if(e.target === popup) popup.style.display="none";
});

async function initSite() {
  try {
    const res = await fetch("manifest.json");
    const data = await res.json();
    const base = data.baseUrl || "";

    data.heroImages.forEach((src,i)=>{
      const img = document.createElement("img");
      img.src = base + src;
      if(i===0) img.classList.add("active");
      hero.appendChild(img);
    });

    let index = 0;
    const slides = hero.querySelectorAll("img");
    setInterval(()=>{
      slides[index].classList.remove("active");
      index = (index+1)%slides.length;
      slides[index].classList.add("active");
    }, HERO_INTERVAL);

    populateGallery("portraits", data.galleryImages || [], base);
    populateGallery("polaroids", data.polaroids || [], base);

  } catch(err) { console.error("Error loading manifest:", err); }
}

initSite();
</script>
</body>
</html>